<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Estimating Tool</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/base.css?v=4" />
  <link rel="stylesheet" href="css/layout.css?v=13" />
  <link rel="stylesheet" href="css/components.css?v=14" />
  <link rel="stylesheet" href="css/theme-dark.css?v=3" />
  <link rel="stylesheet" href="css/theme-light.css?v=2" />
  <link rel="stylesheet" href="css/modal.css?v=5" />

</head>

<body>
  <div class="main-container">
    <div class="header">
      <button id="toggleSidebarBtn" class="sidebar-toggle" title="Toggle pill palette">â˜°</button>
      <div class="header-title">WBS & Pills â€” Phase 1 Core</div>
      <div class="header-note">Drag from left â†’ drop into zones</div>
      <button id="themeToggleBtn" class="btn btn-secondary" style="margin-left: auto; padding: 6px 12px;" title="Toggle light/dark mode">ğŸŒ™</button>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <button class="sidebar-edge-toggle" id="edgeToggleBtn" title="Toggle sidebar">â€º</button>
    <div class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>Pill Palette</h2>
        <button class="sidebar-close" id="closeSidebarBtn">Ã—</button>
      </div>
      <div class="sidebar-content">
        <div class="sidebar-section">
          <h3>Tags</h3>
          <div id="tagPalette" class="palette"></div>
        </div>
        <div class="sidebar-section">
          <h3>Units</h3>
          <div id="unitPalette" class="palette"></div>
        </div>
        <div class="sidebar-section">
          <h3>Setup</h3>
          <div class="palette" style="flex-direction: column; align-items: stretch; gap: 8px;">
                      <button id="setupRateScheduleBtn" class="btn btn-secondary">ğŸ§® Rate Schedule Mgmt</button>
                      <button id="setupResourcesBtn" class="btn btn-secondary">âš™ Resource Mgmt</button>
                      <button id="setupBusinessOrgBtn" class="btn btn-secondary">ğŸ¢ Business Org Mgmt</button>
                      <button id="setupUsagesBtn" class="btn btn-secondary">ğŸ“¦ Usages Mgmt</button>
                      <button id="setupRateTablesBtn" class="btn btn-secondary">ğŸ’° Cost Rate Table Mgmt</button>
                      <button id="setupOHRatesBtn" class="btn btn-secondary">ğŸ“Š OH/Burden Rates</button>
                      <button id="setupMandatoryWBSTasksBtn" class="btn btn-secondary">ğŸ“‹ Mandatory WBS Tasks</button>
                      <button id="setupTagsBtn" class="btn btn-secondary">ğŸ· Tag Mgmt</button>
                      <button id="setupUnitsBtn" class="btn btn-secondary">ğŸ“ Unit Mgmt</button>
                      <button id="viewImportedJobLevelsBtn" class="btn btn-secondary">ğŸ“‹ View Imported Job Levels</button>
            <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border);"></div>
            <div style="display: flex; align-items: center; gap: 8px; padding: 4px 0;">
              <input type="checkbox" id="autobackupEnabled" style="cursor: pointer;" />
              <label for="autobackupEnabled" style="cursor: pointer; flex: 1; font-size: 12px;">Autobackup every</label>
              <input type="number" id="autobackupInterval" min="1" max="1440" value="15" style="width: 50px; padding: 2px 4px; border: 1px solid var(--border); border-radius: 3px; background: var(--bg); color: var(--text); font-size: 11px;" disabled />
              <span style="font-size: 11px; color: var(--text-muted);">min</span>
            </div>
            <div style="margin-top: 4px; padding-top: 12px; border-top: 1px solid var(--border);"></div>
            <button id="clearEstimateBtn" class="btn btn-secondary" style="color: #f59e0b;">ğŸ—‘ï¸ Clear Estimate</button>
            <button id="clearAllDataBtn" class="btn btn-secondary" style="color: #ef4444;">âš ï¸ Clear All Data</button>
          </div>
        </div>
        <div class="sidebar-section">
          <h3>File</h3>
          <div class="palette" style="flex-direction: column; align-items: stretch; gap: 8px;">
            <button id="exportEstimateBtn" class="btn btn-primary">ğŸ’¾ Export JSON</button>
            <button id="importEstimateBtn" class="btn btn-secondary">ğŸ“‚ Import JSON</button>
            <button id="exportOracleCSVBtn" class="btn btn-secondary">ğŸ“‹ Export Oracle CSV</button>
          </div>
        </div>
      </div>
    </div>



    <div class="wbs-wrapper">
      <div class="wbs-toolbar">
        <button id="addPhaseBtn" class="btn btn-primary">+ Phase</button>
        <button id="addTaskBtn" class="btn btn-secondary">+ Task</button>
        
        <div style="width: 32px;"></div>
        
        <button id="laborResourcesToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">âŠ Labor</button>
        <button id="addResourceBtn" class="btn btn-secondary" style="display: none;">+ Resource</button>
        <button id="addActivityBtn" class="btn btn-secondary" style="display: none;">+ Activity</button>
        
        <div style="width: 16px;"></div>
        
        <button id="expensesToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">âŠ Expenses</button>
        <button id="addSubconsultantBtn" class="btn btn-secondary" style="display: none;">+ Subconsultant</button>
        <button id="addOdcBtn" class="btn btn-secondary" style="display: none;">+ ODC</button>
        
        <div style="width: 16px;"></div>
        
        <button id="usagesToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">âŠ Units</button>
        <button id="addUsageBtn" class="btn btn-secondary" style="display: none;">+ Unit</button>

        <div style="width: 16px;"></div>
        
        <button id="scheduleToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">âŠ Schedule</button>

        <div style="width: 16px;"></div>
        
        <button id="taskPropsToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">âŠ Task Props</button>

        <div style="flex: 1;"></div>

        <button id="financialModeToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">ğŸ’° Simple Financials</button>
        <button id="unitDisplayToggle" class="btn btn-primary" style="text-transform: uppercase; font-size: 11px; letter-spacing: 0.5px; font-weight: 600;">ğŸ“¦ Units: Split</button>
      </div>
      <div id="wbsContainer" class="wbs-container">
        <!-- WBS rows injected here -->
      </div>
    </div>

    <div class="footer">
      WBS with drag & drop, labor estimation, and automatic cost calculations
      <span style="margin-left: 16px; color: #6b7280; font-size: 10px;">v2024.01.20-columnExpanders</span>
    </div>
  </div>

  <!-- JS -->
  <script src="js/datastore.js?v=10"></script>
  <script src="js/job-levels.js?v=2"></script>
    <script src="js/rate-columns.js?v=2"></script>
  <script src="js/rate-tables.js?v=2"></script>
  <script src="js/province-mapping.js?v=1"></script>
  <script src="js/registry-estimateTypes.js?v=3"></script>
  <script src="js/registry-tags.js?v=3"></script>
  <script src="js/registry-units.js?v=3"></script>
  <script src="js/rates.js?v=8"></script>
  <script src="js/calculations.js?v=12"></script>
  <script src="js/resource-manager.js?v=16"></script>
  <script src="js/usages-manager.js?v=1"></script>
  <script src="js/units-manager.js?v=2"></script>
  <script src="js/rate-tables-manager.js?v=1"></script>
  <script src="js/estimate-export.js?v=2"></script>
  <script src="js/oracle-export.js?v=7"></script>
  <script src="js/oracle-export.js?v=1"></script>

  <script src="js/modal.js?v=3"></script>
  <script src="js/rate-schedule-manager.js?v=1"></script>

  <script src="js/form-labor-ttm.js?v=5"></script>
  <script src="js/labor-matrix.js?v=4"></script>
  <script src="js/labor-expansion.js?v=3"></script>
  <script src="js/pills.js?v=3"></script>
  <script src="js/dragdrop.js?v=3"></script>
	<script src="js/columnResize.js?v=3"></script>
  <script src="js/wbs.js?v=66"></script>
  <script src="js/business-org-manager.js?v=3"></script>
  <script src="js/app.js?v=8"></script>
  <script>
    // console.log("Page loaded, all scripts should be loaded now");
    // console.log("RateScheduleManager:", window.RateScheduleManager);
    // console.log("Modal:", window.Modal);
  </script>
</body>
</html>
